<!DOCTYPE html>
<html lang="en">

<head>
  <!-- basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- mobile metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
  <!-- site metas -->
  <title>Benjamin Martinez - School Acitivity</title>
  <meta name="keywords" content="School Activity" />
  <meta name="description" content="This is my school activity" />
  <meta name="author" content="Benjamin Martinez" />
  <!-- site icon -->
  <link rel="icon" href="images/fevicon.png" type="image/png" />
  <!-- bootstrap css -->
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <!-- site css -->
  <link rel="stylesheet" href="style.css" />
  <!-- responsive css -->
  <link rel="stylesheet" href="css/responsive.css" />
  <!-- color css -->
  <link rel="stylesheet" href="css/colors.css" />
  <!-- select bootstrap -->
  <link rel="stylesheet" href="css/bootstrap-select.css" />
  <!-- scrollbar css -->
  <link rel="stylesheet" href="css/perfect-scrollbar.css" />
  <!-- custom css -->
  <link rel="stylesheet" href="css/custom.css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />

</head>

<body class="inner_page project_page">
  <div class="full_container">
    <div class="inner_container">
      <!-- Sidebar  -->
      <nav id="sidebar">
        <div class="sidebar_blog_1">
          <div class="sidebar-header">
            <div class="logo_section">
              <a href="index.html">
                <img class="logo_icon img-responsive" src="images/logo/logo_icon.png" alt="#" />
              </a>
            </div>
          </div>
          <div class="sidebar_user_info">
            <div class="icon_setting"></div>
            <div class="user_profle_side">
              <div class="user_img">
                <img class="img-responsive" src="images/layout_img/user_img.jpg" alt="#" />
              </div>
              <div class="user_info">
                <h6>Benjamin Martinez</h6>
                <p><span class="online_animation"></span> Online</p>
              </div>
            </div>
          </div>
        </div>
        <div class="sidebar_blog_2">
          <h4>General</h4>
          <ul class="list-unstyled components">
            <li>
              <a href="index.html">
                <i class="fas fa-user-graduate yellow_color"></i>
                <span>1st year 1st sem</span>
              </a>
            </li>
            <li>
              <a href="1st-year-2.html">
                <i class="fas fa-user-graduate orange_color"></i>
                <span>1st year 2nd sem</span>
              </a>
            </li>
            <li>
              <a href="2nd-year-1.html">
                <i class="fas fa-user-graduate purple_color2"></i>
                <span>2nd year 1st sem</span>
              </a>
            </li>
            <li>
              <a href="2nd-year-2.html">
                <i class="fas fa-user-graduate red_color"></i>
                <span>2nd year 2nd sem</span>
              </a>
            </li>
            <li>
              <a href="3rd-year-1.html">
                <i class="fas fa-user-graduate yellow_color"></i>
                <span>3rd year 1st sem</span>
              </a>
            </li>
            <li>
              <a href="3rd-year-2.html">
                <i class="fas fa-user-graduate yellow_color"></i>
                <span>3rd year 2nd sem</span>
              </a>
            </li>
            <li>
              <a href="4th-year-1.html">
                <i class="fas fa-user-graduate yellow_color"></i>
                <span>4th year 1st sem</span>
              </a>
            </li>
            <li>
              <a href="4th-year-2.html">
                <i class="fas fa-user-graduate yellow_color"></i>
                <span>4th year 2nd sem</span>
              </a>
            </li>
            <li>
              <a href="mid-year.html">
                <i class="fas fa-user-graduate yellow_color"></i>
                <span>Mid year</span>
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- end sidebar -->
      <!-- right content -->
      <div id="content">
        <!-- topbar -->
        <div class="topbar">
          <nav class="navbar navbar-expand-lg navbar-light">
            <div class="full">
              <button type="button" id="sidebarCollapse" class="sidebar_toggle">
                <i class="fa fa-bars"></i>
              </button>
              <div class="logo_section">
                <a href="index.html"><img class="img-responsive" src="images/logo/logo.png" alt="#" /></a>
              </div>
              <div class="right_topbar">
                <div class="icon_info">
                  <ul>
                    <li>
                      <a href="#"><i class="fa fa-bell-o"></i><span class="badge">2</span></a>
                    </li>
                    <li>
                      <a href="#"><i class="fa fa-question-circle"></i></a>
                    </li>
                    <li>
                      <a href="#"><i class="fa fa-envelope-o"></i><span class="badge">3</span></a>
                    </li>
                  </ul>
                  <ul class="user_profile_dd">
                    <li>
                      <a class="dropdown-toggle" data-toggle="dropdown"><img class="img-responsive rounded-circle" src="images/layout_img/user_img.jpg" alt="#" /><span class="name_user">Benjamin Martinez</span></a>
                      <div class="dropdown-menu">
                        <a class="dropdown-item" href="profile.html">My Profile</a>
                        <a class="dropdown-item" href="settings.html">Settings</a>
                        <a class="dropdown-item" href="help.html">Help</a>
                        <a class="dropdown-item" href="#"><span>Log Out</span> <i class="fa fa-sign-out"></i></a>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </nav>
        </div>
        <div class="midde_cont">
          <div class="container-fluid">
            <div class="row column_title">
              <div class="col-md-12">
                <div class="page_title">
                  <h2>1st year 1st sem</h2>
                </div>
              </div>
            </div>
            <div class="row column1">
              <div class="col-md-6 col-lg-3">
                <div class="full counter_section margin_bottom_30">
                  <div class="couter_icon">
                    <div>
                      <i class="fa fa-user yellow_color"></i>
                    </div>
                  </div>
                  <div class="counter_no">
                    <div>
                      <p class="total_no">2500</p>
                      <p class="head_couter">Welcome</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="row">
              <div class="col-md-6 mb-2 mb-md-0">
                <div class="input-group">
                  <input type="text" class="form-control" id="searchBox" placeholder="Search...">
                  <div class="input-group-append">
                    <button class="btn btn-primary" type="button"><i class="fas fa-search"></i></button>
                  </div>
                </div>
              </div>
              <div class="col-md-6 text-md-right">
                <!-- Add Button -->
                <button class="btn btn-primary" id="addButton" data-toggle="modal" data-target="#addCourseModal">Add first year 1st sem</button>
              </div>
            </div>
          </div>

          <div class="modal fade" id="addCourseModal" tabindex="-1" role="dialog" aria-labelledby="addCourseModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="addCourseModalLabel">Add New Course</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form id="addCourseForm" method="post" action="insert1st1stsem.php">

                    <label for="course_code">Course Code:</label><br>
                    <input type="text" id="course_code" name="course_code" required><br><br>
                    <label for="course_name">Course Name:</label><br>
                    <input type="text" id="course_name" name="course_name" required><br><br>
                    <label for="grade">Grade:</label><br>
                    <input type="text" id="grade" name="grade"><br><br>
                    <label for="instructor">Instructor:</label><br>
                    <input type="text" id="instructor" name="instructor"><br><br>
                    <input type="submit" value="Submit" class="btn btn-primary">
                  </form>
                </div>
              </div>
            </div>
          </div>



          <div class="container mt-4">
            <h2>Course List</h2>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th><strong>Course Code</strong></th>
                  <th><strong>Course Name</strong></th>
                  <th><strong>Grade</strong></th>
                  <th><strong>Instructor</strong></th>
                  <th><strong>Action</strong></th>
                </tr>
              </thead>
              <tbody>
                <?php
                include 'conn.php';
                $sql = "SELECT * FROM 1st_year_1st_semester";

                // Execute the query
                $result = $conn->query($sql);

                if ($result) {
                  while ($row = $result->fetch_assoc()) {
                ?>
                    <tr>
                      <td><?php echo $row['course_code']; ?></td>
                      <td><?php echo $row['course_name']; ?></td>
                      <td><?php echo $row['grade']; ?></td>
                      <td><?php echo $row['instructor']; ?></td>
                      <td>
                        <button type="button" class="btn btn-primary btn-sm edit-btn" data-toggle="modal" data-target="#editCourseModal" data-id="<?php echo $row['id']; ?>" data-code="<?php echo $row['course_code']; ?>" data-name="<?php echo $row['course_name']; ?>" data-grade="<?php echo $row['grade']; ?>" data-instructor="<?php echo $row['instructor']; ?>">EDIT</button>
                        <button type="button" class="btn btn-danger btn-sm delete-btn" data-toggle="modal" data-target="#deleteModal<?php echo $row['id']; ?>">DELETE</button>
                      </td>
                    </tr>

                    <div class="modal fade" id="editCourseModal" tabindex="-1" role="dialog" aria-labelledby="editCourseModalLabel" aria-hidden="true">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="editCourseModalLabel">Edit Course</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <form id="editCourseForm" method="post" action="update_course.php">
                              <input type="hidden" id="editCourseId" name="course_id">
                              <div class="form-group">
                                <label for="editCourseCode">Course Code:</label>
                                <input type="text" class="form-control" id="editCourseCode" name="course_code" required value="<?php echo $row['course_code']; ?>">
                              </div>
                              <div class="form-group">
                                <label for="editCourseName">Course Name:</label>
                                <input type="text" class="form-control" id="editCourseName" name="course_name" required value="<?php echo $row['course_name']; ?>">
                              </div>
                              <div class="form-group">
                                <label for="editGrade">Grade:</label>
                                <input type="text" class="form-control" id="editGrade" name="grade" value="<?php echo $row['grade']; ?>">
                              </div>
                              <div class="form-group">
                                <label for="editInstructor">Instructor:</label>
                                <input type="text" class="form-control" id="editInstructor" name="instructor" value="<?php echo $row['instructor']; ?>">
                              </div>
                              <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="modal fade" id="deleteModal<?php echo $row['id']; ?>" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="deleteModalLabel">Delete Student Data</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            Are you sure you want to delete this student?
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-danger confirm-delete" data-student-id="<?php echo $row['id']; ?>">Delete</button>
                          </div>
                        </div>
                      </div>
                    </div>
                <?php
                  }
                } else {
                  echo "Error in query: " . $conn->errorInfo()[2];
                }
                ?>
              </tbody>
            </table>
          </div>



          <script>
            $(document).ready(function() {
              // Handle click event on edit button
              $('.edit-btn').click(function() {
                var courseId = $(this).data('id');
                var courseCode = $(this).data('code');
                var courseName = $(this).data('name');
                var grade = $(this).data('grade');
                var instructor = $(this).data('instructor');

                // Populate the modal fields with data
                $('#editCourseId').val(courseId);
                $('#editCourseCode').val(courseCode); // Populate course code input field
                $('#editCourseName').val(courseName);
                $('#editGrade').val(grade);
                $('#editInstructor').val(instructor);
              });
            });
          </script>
          <?php
          // Close database connection
          $conn->close();
          ?>
          <div class="container-fluid">
            <div class="footer">
              <p>
                Copyright © 2018 Designed by html.design. All rights reserved.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Real-time search functionality
    document.getElementById('searchBox').addEventListener('input', function() {
      const searchTerm = this.value.toLowerCase();
      const tableRows = document.querySelectorAll('#courseTableBody tr');

      tableRows.forEach(row => {
        /*  const userId = row.querySelector('.user-id').textContent.toLowerCase(); */
        const courseCode = row.querySelector('.course-code').textContent.toLowerCase();
        const courseName = row.querySelector('.course-name').textContent.toLowerCase();
        const grade = row.querySelector('.grade').textContent.toLowerCase();
        const instructor = row.querySelector('.instructor').textContent.toLowerCase();

        if ( /* userId.includes(searchTerm) || */ courseCode.includes(searchTerm) || courseName.includes(searchTerm) || grade.includes(searchTerm) || instructor.includes(searchTerm)) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    });
  </script>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <!-- DataTables JS -->
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>

  <script>
    jQuery(document).ready(function() {
      // Initialize DataTable
      var table = $('#courseTable').DataTable({
        "columns": [{
            "data": "course_code"
          },
          {
            "data": "course_name"
          },
          {
            "data": "grade"
          },
          {
            "data": "instructor"
          }
        ]
      });

      // Handle form submission
      $('#addCourseForm').submit(function(event) {
        event.preventDefault(); // Prevent default form submission

        // Serialize form data
        var formData = $(this).serialize();

        // Send form data to server using AJAX
        jQuery.ajax({
          type: 'POST',
          url: 'insert1st1stsem.php', // Path to PHP script that inserts data
          data: formData,
          success: function(response) {
            // Parse the JSON response
            var responseData = JSON.parse(response);

            // Check if the insertion was successful
            if (responseData.success) {
              // Close modal
              $('#addCourseModal').modal('hide');

              // Reload the DataTable
              table.ajax.reload();

              // Alert the received data
              alert(JSON.stringify(responseData));
            } else {
              // Handle error
              console.error("Error: " + responseData.error);
            }
          },
          error: function(xhr, status, error) {
            console.error(xhr.responseText); // Log any errors to console
          }
        });

      });
    });
  </script>



  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <!-- jQuery -->
  <script src="js/jquery.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <!-- wow animation -->
  <script src="js/animate.js"></script>
  <!-- select country -->
  <script src="js/bootstrap-select.js"></script>
  <!-- owl carousel -->
  <script src="js/owl.carousel.js"></script>
  <!-- chart js -->
  <script src="js/Chart.min.js"></script>
  <script src="js/Chart.bundle.min.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/analyser.js"></script>
  <!-- nice scrollbar -->
  <script src="js/perfect-scrollbar.min.js"></script>
  <script>
    var ps = new PerfectScrollbar("#sidebar");
  </script>
  <!-- custom js -->
  <script src="js/custom.js"></script>
  <!-- calendar file css -->
  <script src="js/semantic.min.js"></script>
</body>

</html>